uncleardataH7 <- read_sas(urlH7,NULL)
uncleardataH7 <- data.table(uncleardataH7)
colnames(uncleardataH7)[colnames(uncleardataH7) == "PREM_YM"] <- "FEE_YM"
temp <- merge(uncleardataH2, uncleardataH7, by = c("ID", "FEE_YM"))
H2H7 <- rbindlist(list(H2H7, temp))
}
(dt1 <- data.table(ID = letters[1:10:5], X = 1:10, month = 1:10:2))
(dt2 <- data.table(ID = letters[1:5:10], y = 1:20, month = c(rep(1,10),rep(2,10))))
merge(dt1, dt2, by = c("ID", "month"))
(dt1 <- data.table(ID = letters[1:10:5], X = 1:10, month = 1:10:2))
(dt2 <- data.table(ID = letters[1:5:2], y = 1:10, month = c(rep(1,5),rep(2,5))))
merge(dt1, dt2, by = c("ID", "month"))
(dt1 <- data.table(ID = letters[1:10:5], X = 1:10, month = 1:10:2))
(dt2 <- data.table(ID = letters[1:6], y = 1:6, month = c(rep(1,3),rep(2,3))))
merge(dt1, dt2, by = c("ID", "month"))
(dt1 <- data.table(ID = letters[1:10:5], X = 1:10, month = 1:10:2))
(dt2 <- data.table(ID = c(letters[1:3],letters[1:3]), y = 1:6, month = c(rep(1,3),rep(2,3))))
merge(dt1, dt2, by = c("ID", "month"))
write.csv(H2H7, "C:/Users/user/Desktop/program/CCL/H2H7_OBS.csv", row.names=FALSE)
rbindlist(list(H1H7, H2H7))
merge(H1H7, H2H7, all = TRUE)
H1H2H7 <- merge(H1H7, H2H7, all = TRUE)
View(H1H2H7)
write.csv(H1H2H7, "C:/Users/user/Desktop/program/CCL/H1H2H7_OBS.csv", row.names=FALSE)
install.packages(fixest)
install.packages("fixest")
install.packages("knitr")
install.packages("knitr")
install.packages("dplyr")
install.packages("dplyr")
install.packages("dplyr")
install.packages("dplyr")
install.packages("dplyr")
install.packages("data.table")
install.packages(" ggplot2,")
install.packages("ggplot2")
get_area <- function(intA,intB ) {
return(intA + intB)
}
add_two_number <- function(intA,intB ) {
return(intA + intB)
}
print("HelloWorld")
add_two_number <- function(intA,intB ) {
return(intA + intB)
}
tinytex::install_tinytex()
add_two_number <- function(intA,intB ) {
return(intA + intB)
}
add_two_number(2,3)
browser()
]
browser()
]
rmarkdown::render("~/mydocs/doc.Rmd")
]
]
rm
sink()
print("HelloWorld")
rmarkdown::render("~/mydocs/doc.Rmd")
browser()
add_two_number <- function(intA,intB ) {
return(intA + intB)
}
add_two_number(2,3)
add_two_number(2,4)
add_two_number(10)
add_two_number(2,10)
add_two_number <- function(intA,intB ) {
return(intA + intB)
}
add_two_number(2,3)
# import data
library(haven)
RCI2016_v201811_spss <- read_sav("C:/Users/user/Downloads/C00320_3/RCI2016_v201811_spss.sav")
View(RCI2016_v201811_spss)
# import data
library(haven)
PSFD2016 <- read_sav("C:/Users/user/Downloads/C00320_3/RCI2016_v201811_spss.sav")
# import data
library(haven)
library('dplyr')
library('data.table')
PSFD2016 <-data.table(read_sav("C:/Users/user/Downloads/C00320_3/RCI2016_v201811_spss.sav"))
# import data
library(haven)
library('dplyr')
library('data.table')
PSFD2016 <-data.table(read_sav("C:/Users/user/Downloads/C00320_3/RCI2016_v201811_spss.sav"))
head(PSFD2016)
View(PSFD2016)
# import data
library(haven)
library('dplyr')
library('data.table')
PSFD2016 <-data.table(read_sav("C:/Users/user/Downloads/C00320_3/RCI2016_v201811_spss.sav"))
head(PSFD2016,5)
View(PSFD2016)
# import data
library(haven)
library('dplyr')
library('data.table')
PSFD2016 <-data.table(read_sav("C:/Users/user/Downloads/C00320_3/RCI2016_v201811_spss.sav"))
PSFD2016
# import data
library(haven)
library('dplyr')
library('data.table')
PSFD2016 <-data.table(read_sav("C:/Users/user/Downloads/C00320_3/RCI2016_v201811_spss.sav"))
library("ggplot2")
#check if 訪問年分(x02) == 2016
PSFD2016[, x02 == 2016]
library("ggplot2")
#check if 訪問年分(x02) == 2016
PSFD2016[x02 != 2016]
# import data
library(haven)
library('dplyr')
PSFD2016 <- read_sav("C:/Users/user/Downloads/C00320_3/RCI2016_v201811_spss.sav")
head(PSFD2016)
library("ggplot2")
#check if 訪問年分(x02) == 2016
PSFD2016[x02 != 2016]
library("ggplot2")
#check if 訪問年分(x02) == 2016
PSFD2016[,x02 != 2016]
library("ggplot2")
#check if 訪問年分(x02) == 2016
PSFD2016[PSFD2016$x02 != 2016,]
#calculate age
##a02a01:請問你是民國幾年出生
##訪問年分=2016 = 民國105年)
PSFD2016$age <- 105 - PSFD2016$a02a01 + 1
#c02z01:請問你目前有工作嗎? 1:有 2、3:家庭主婦、4:無
##only consider work at market(1).
PSFD2016$work <- PSFD2016$c02z01 == 1
View(PSFD2016)
library("ggplot2")
work_age <- ggplot(PSFD2016, aes(x=work, y=age))
+ labs(title="rate of working against age")+
+ xlab('work_rate')+
+ ylab('age ')
library("ggplot2")
work_age <- ggplot(PSFD2016, aes(x=work, y=age)) +
labs(title="rate of working against age")+
xlab('work_rate')+
ylab('age ')
library("ggplot2")
work_age <- ggplot(PSFD2016, aes(x=work, y=age)) +
labs(title="rate of working against age")+
xlab('work_rate')+
ylab('age ')
plot(work_age)
library("ggplot2")
work_age <- ggplot(PSFD2016, aes(x=work, y=age)) +
gem_point()+
labs(title="rate of working against age")+
xlab('work_rate')+
ylab('age ')
library("ggplot2")
work_age <- ggplot(PSFD2016, aes(x=work, y=age)) +
geom_point()+
labs(title="rate of working against age")+
xlab('work_rate')+
ylab('age ')
plot(work_age)
library("ggplot2")
work_age <- ggplot(PSFD2016, aes(x=work, y=age)) +
geom_bar()+
labs(title="rate of working against age")+
xlab('work_rate')+
ylab('age ')
plot(work_age)
library("ggplot2")
work_age <- ggplot(PSFD2016, aes(x=work, y=age)) +
geom_line()+
labs(title="rate of working against age")+
xlab('work_rate')+
ylab('age ')
plot(work_age)
#calculate age
##a02a01:請問你是民國幾年出生
##訪問年分=2016 = 民國105年)
PSFD2016$age <- 105 - PSFD2016$a02a01 + 1
#c02z01:請問你目前有工作嗎? 1:有 2、3:家庭主婦、4:無
##only consider work at market(1).
PSFD2016$work <- PSFD2016$c02z01 == 1
PSFD2016 %>% convert(num(work))
#calculate age
##a02a01:請問你是民國幾年出生
##訪問年分=2016 = 民國105年)
PSFD2016$age <- 105 - PSFD2016$a02a01 + 1
#c02z01:請問你目前有工作嗎? 1:有 2、3:家庭主婦、4:無
##only consider work at market(1).
if(PSFD2016$c02z01 == 1){
PSFD2016$work <- 1
}else{
PSFD2016$work <- 0
}
#calculate age
##a02a01:請問你是民國幾年出生
##訪問年分=2016 = 民國105年)
PSFD2016$age <- 105 - PSFD2016$a02a01 + 1
#c02z01:請問你目前有工作嗎? 1:有 2、3:家庭主婦、4:無
##only consider work at market(1).
PSFD2016 %<% mutate(work = if_else(c02z01 == 1))
#calculate age
##a02a01:請問你是民國幾年出生
##訪問年分=2016 = 民國105年)
PSFD2016$age <- 105 - PSFD2016$a02a01 + 1
#c02z01:請問你目前有工作嗎? 1:有 2、3:家庭主婦、4:無
##only consider work at market(1).
PSFD2016 %>% mutate(work = if_else(c02z01 == 1))
#calculate age
##a02a01:請問你是民國幾年出生
##訪問年分=2016 = 民國105年)
PSFD2016$age <- 105 - PSFD2016$a02a01 + 1
#c02z01:請問你目前有工作嗎? 1:有 2、3:家庭主婦、4:無
##only consider work at market(1).
PSFD2016 %>% mutate(work = if_else(c02z01 == 1,1,0))
View(PSFD2016)
#calculate age
##a02a01:請問你是民國幾年出生
##訪問年分=2016 = 民國105年)
PSFD2016$age <- 105 - PSFD2016$a02a01 + 1
#c02z01:請問你目前有工作嗎? 1:有 2、3:家庭主婦、4:無
##only consider work at market(1).
PSFD2016 %>% mutate(work = if_else(c02z01 == 1, num(1), num(0)))
#calculate age
##a02a01:請問你是民國幾年出生
##訪問年分=2016 = 民國105年)
PSFD2016$age <- 105 - PSFD2016$a02a01 + 1
#c02z01:請問你目前有工作嗎? 1:有 2、3:家庭主婦、4:無
##only consider work at market(1).
PSFD2016 %>% mutate(work = if_else(c02z01 == 1, numeric(1), numeric(0)))
#calculate age
##a02a01:請問你是民國幾年出生
##訪問年分=2016 = 民國105年)
PSFD2016$age <- 105 - PSFD2016$a02a01 + 1
#c02z01:請問你目前有工作嗎? 1:有 2、3:家庭主婦、4:無
##only consider work at market(1).
PSFD2016 %>% mutate(work = if_else(c02z01 == 1, 1, 0))
View(PSFD2016)
PSFD2016 %>% summarise(work)
PSFD2016 %>% group_by(age) %>%summarise(work)
#calculate age
##a02a01:請問你是民國幾年出生
##訪問年分=2016 = 民國105年)
PSFD2016$age <- 105 - PSFD2016$a02a01 + 1
#c02z01:請問你目前有工作嗎? 1:有 2、3:家庭主婦、4:無
##only consider work at market(1).
# %>% mutate(work = if_else(c02z01 == 1, 1, 0))
PSFD2016$work <- PSFD2016$c02z01 == 1
as.integer(PSFD2016$work)
#calculate age
##a02a01:請問你是民國幾年出生
##訪問年分=2016 = 民國105年)
PSFD2016$age <- 105 - PSFD2016$a02a01 + 1
#c02z01:請問你目前有工作嗎? 1:有 2、3:家庭主婦、4:無
##only consider work at market(1).
# %>% mutate(work = if_else(c02z01 == 1, 1, 0))
PSFD2016$work <- PSFD2016$c02z01 == 1
PSFD2016$work <- as.integer(PSFD2016$work)
#calculate age
##a02a01:請問你是民國幾年出生
##訪問年分=2016 = 民國105年)
PSFD2016$age <- 105 - PSFD2016$a02a01 + 1
#c02z01:請問你目前有工作嗎? 1:有 2、3:家庭主婦、4:無
##only consider work at market(1).
# %>% mutate(work = if_else(c02z01 == 1, 1, 0))
PSFD2016$work <- as.integer(PSFD2016$c02z01 == 1)
PSFD2016 %>% group_by(age) %>% summarise(work)
library("ggplot2")
work_age <- ggplot(PSFD2016, aes(x=work, y=age)) +
geom_line()+
labs(title="rate of working against age")+
xlab('work_rate')+
ylab('age ')
plot(work_age)
PSFD2016 %>% group_by(age) %>% summarise(work_rate = mean(work))
work_RSFD2016 <- PSFD2016 %>% group_by(age) %>% summarise(work_rate = mean(work))
View(work_RSFD2016)
library("ggplot2")
work_age <- ggplot(work_RSFD2016, aes(x=work_rate, y=age)) +
geom_line()+
labs(title="rate of working against age")+
xlab('work_rate')+
ylab('age ')
plot(work_age)
library("ggplot2")
work_age <- ggplot(work_RSFD2016, aes(x=work_rate, y=age)) +
geom_line()+
labs(title="rate of working against age")+
xlab('work_rate')+
ylab('age ')
plot(work_age)
library("ggplot2")
work_age <- ggplot(work_RSFD2016, aes(x=work_rate, y=age)) +
geom_point()+
labs(title="rate of working against age")+
xlab('work_rate')+
ylab('age ')
plot(work_age)
library("ggplot2")
work_age <- ggplot(work_RSFD2016, aes(x=work_rate, y=age)) +
geom_bar()+
labs(title="rate of working against age")+
xlab('work_rate')+
ylab('age ')
plot(work_age)
library("ggplot2")
work_age <- ggplot(work_RSFD2016, aes(x=work_rate, y=age)) +
geom_line()+
labs(title="rate of working against age")+
xlab('work_rate')+
ylab('age ')
plot(work_age)
library("ggplot2")
work_age <- ggplot(work_RSFD2016) +
geom_bar(aes(y=age), stat=work_rate)+
labs(title="rate of working against age")+
xlab('work_rate')+
ylab('age ')
library("ggplot2")
work_age <- ggplot(work_RSFD2016, aes(x=work_rate, y=age)) +
geom_line()+
geom_point()
labs(title="rate of working against age")+
xlab('work_rate')+
ylab('age ')
library("ggplot2")
work_age <- ggplot(work_RSFD2016, aes(x=work_rate, y=age)) +
geom_line()+
geom_point()+
labs(title="rate of working against age")+
xlab('work_rate')+
ylab('age ')
plot(work_age)
?ggplot2
library("ggplot2")
work_age <- ggplot(work_RSFD2016) +
geom_bar(aes(x=work_rate, y=age), stat = "identity"))+
library("ggplot2")
work_age <- ggplot(work_RSFD2016) +
geom_bar(aes(x=work_rate, y=age), stat = "identity")+
labs(title="rate of working against age")+
xlab('work_rate')+
ylab('age ')
plot(work_age)
library("ggplot2")
work_age <- ggplot(work_RSFD2016) +
geom_bar(aes(x=work_rate, y=age), stat = "identity")+
labs(title="rate of working against age")+
+coord_flip()
library("ggplot2")
work_age <- ggplot(work_RSFD2016) +
geom_bar(aes(x=work_rate, y=age), stat = "identity")+
labs(title="rate of working against age")+
coord_flip()+
xlab('work_rate')+
ylab('age ')
plot(work_age)
library("ggplot2")
work_age <- ggplot(work_RSFD2016) +
geom_bar(aes(y=work_rate, x=age), stat = "identity")+
labs(title="rate of working against age")+
coord_flip()+
ylab('work_rate')+
xlab('age ')
plot(work_age)
library("ggplot2")
work_age <- ggplot(work_RSFD2016) +
geom_bar(mapping = aes(y=work_rate, x=age), stat = "identity")+
labs(title="rate of working against age")+
coord_flip()+
ylab('work_rate')+
xlab('age ')+
width=0.5
library("ggplot2")
work_age <- ggplot(work_RSFD2016) +
geom_bar(aes(y=work_rate, x=age), stat = "identity")+
labs(title="rate of working against age")+
coord_flip()+
ylab('work_rate')+
xlab('age ')+
width=0.5
library("ggplot2")
work_age <- ggplot(work_RSFD2016) +
geom_bar(aes(y=work_rate, x=age), stat = "identity")+
labs(title="rate of working against age")+
coord_flip()+
ylab('work_rate')+
xlab('age ')
plot(work_age)
library("ggplot2")
work_age <- ggplot(work_RSFD2016) +
geom_bar(aes(y=work_rate, x=age), stat = "identity",width = 0.5)+
labs(title="rate of working against age")+
coord_flip()+
ylab('work_rate')+
xlab('age ')
plot(work_age)
library("ggplot2")
work_age <- ggplot(work_RSFD2016) +
geom_bar(mapping = aes(y=work_rate, x=age), stat = "identity",width = 0.5)+
labs(title="rate of working against age")+
coord_flip()+
ylab('work_rate')+
xlab('age ')
plot(work_age)
library("ggplot2")
work_age <- ggplot(work_RSFD2016) +
#geom_bar(mapping = aes(y=work_rate, x=age), stat = "identity",width = 0.5)+
geom_line(mapping = aes(y=work_rate, x=age)) +
labs(title="rate of working against age")+
coord_flip()+
ylab('work_rate')+
xlab('age ')
plot(work_age)
rm()
rm(list = ls())
# import data
library(haven)
library('dplyr')
PSFD2016 <- read_sav("C:/Users/user/Downloads/C00320_3/RCI2016_v201811_spss.sav")
head(PSFD2016)
rm(list = ls())
print("HelloWorld")
add_two_number <- function(intA,intB ) {
return(intA + intB)
}
add_two_number(2,3)
# import data
library(haven)
library('dplyr')
PSFD2016 <- read_sav("C:/Users/user/Downloads/C00320_3/RCI2016_v201811_spss.sav")
head(PSFD2016)
#check if 訪問年分(x02) == 2016
PSFD2016[PSFD2016$x02 != 2016,]
#calculate age
##a02a01:請問你是民國幾年出生
##訪問年分=2016 = 民國105年)
PSFD2016$age <- 105 - PSFD2016$a02a01 + 1
#c02z01:請問你目前有工作嗎? 1:有 2、3:家庭主婦、4:無
##only consider work at market(1).
# %>% mutate(work = if_else(c02z01 == 1, 1, 0))
PSFD2016$work <- as.integer(PSFD2016$c02z01 == 1)
work_RSFD2016 <- PSFD2016 %>% group_by(age) %>% summarise(work_rate = mean(work))
library("ggplot2")
work_age <- ggplot(work_RSFD2016) +
#geom_bar(mapping = aes(y=work_rate, x=age), stat = "identity",width = 0.5)+
geom_line(mapping = aes(y=work_rate, x=age)) +
labs(title="rate of working against age")+
coord_flip()+
ylab('work_rate')+
xlab('age ')
plot(work_age)
rm(list = ls())
mu0 <- 10
mu1 <- 9
var0 <- 1
var1 <- 2
var01 <- 0.6
c <- 1
library('dplyr')
library('data.table')
simulation <- data.table(
eplison0 = rnorm(10^7, 0, var0),
eplison1 = rnorm(10^7, 0, var1)
)
head(simulation)
# W0 = u0 + eplison0
# w1 = u1 + eplison1
simulation[, w0:= mu0+eplison0]
simulation[, w1:= mu1+eplison1]
head(simulation)
# Migrate(I=1) if w1>(w0+c)
simulation[w1-w0-c>0, I:= 1]
simulation[w1-w0-c<=0, I:= 0]
head(simulation)
conditionmean_bydata<- simulation[,
.(condi_w0_bydata = mean(w0), #condi_w0_bydata is E(w0|I) cal by data.
condi_w1_bydata = mean(w1), #condi_w1_bydata is E(w1|I) cal by data.
Q0_bydata = mean(eplison0), #Q0_bydata is E(eplison0|I) cal by data
Q1_bydata = mean(eplison1)),#Q1_bydata is E(eplison1|I) cal by data
by = I]
conditionmean_bydata
# The first row(I=1) is what we want to know.
# get z by data
simulation[, v := eplison1-eplison0]
val_v <- simulation[, var(v)]
z <- (mu0-mu1+c)/val_v
# where we know E(w1|I) = mu1 + var1*E((eplison1/var1)|(v/var_v > z))
# and E(w0|I) = mu0 + var0*E((eplison0/var0)|(v/var_v > z))
simulation[v/var(v) > z, condi:= 1]
simulation[v/var(v) <= z, condi:= 0]
E1 <- simulation[,mu1+ var1*mean(eplison1/var1), by = condi]
conditionmean_bydRHD<- simulation[,
# condi_w0_byRHS is E(w0|I) cal by E(w0|I) = mu0 + var0*E((eplison0/var0)|(v/var_v > z))
.(condi_w0_byRHS = mu0+ var0*mean(eplison0/var0),
# condi_w1_byRHS is E(w1|I) cal by E(w1|I) = mu1 + var1*E((eplison1/var1)|(v/var_v > z))
condi_w1_byRHS = mu1+ var1*mean(eplison1/var1)),
by = condi]
# Q0_byRHS is E(eplison0|I) cal by calculation(E(w0|I)-mu0)
conditionmean_bydRHD[,Q0_byRHS := (condi_w0_byRHS - mu0)]
# Q1_byRHS is E(eplison1|I) cal by calculation(E(w1|I)-mu1)
conditionmean_bydRHD[,Q1_byRHS := (condi_w1_byRHS - mu1)]
conditionmean_bydRHD
# E(w1,I=1) & E(w0,I=0) is observed in real world,
# E(w1,I=0) & E(w0,I=1) is not observed in real world,
